# TODO — следующая сессия

## Проверить результаты ночного обучения
- [ ] Процесс жив? `ps aux | grep hillclimb.train`
- [ ] Сколько эпизодов? `grep "^  EP" logs/train_run.log | wc -l`
- [ ] Последние эпизоды: `grep "^  EP" logs/train_run.log | tail -20`
- [ ] Best distance: `grep "best=" logs/train_run.log | tail -1`
- [ ] Модель сохранилась? `ls -la models/ppo_hillclimb*`
- [ ] Чекпоинты: `ls -la models/checkpoints/`
- [ ] TensorBoard: `tensorboard --logdir logs/tensorboard`
- [ ] Дашборд: http://NAS-IP:8150 — все 8 эмуляторов живы?

## Исправить проблему UNKNOWN (30% эпизодов)
30% эпизодов завершаются со статусом UNKNOWN — агент не может классифицировать экран.
Это плохо для обучения: episode termination срабатывает без ясной причины.

- [ ] Собрать debug-кадры UNKNOWN: `ls logs/nav_debug/*_unknown.png`
- [ ] Посмотреть что на экране в момент UNKNOWN — какой это реальный стейт?
- [ ] Добавить сохранение debug-кадра в `env.py` при завершении эпизода на UNKNOWN
- [ ] Исправить классификатор `vision.py` для пропущенных стейтов
- [ ] Возможные причины:
  - Переходные кадры между стейтами (анимация загрузки)
  - Новые попапы которые не обрабатываются
  - Тёмные/необычные карты с нестандартными цветами

## Оптимизация обучения
- [ ] Увеличить steps на эпизод (сейчас 3-24, нужно 50+)
- [ ] Проанализировать reward function — достаточно ли сигнала?
- [ ] Рассмотреть device='cpu' (PPO с MlpPolicy быстрее на CPU)
- [ ] Если 100k завершилось — запустить 500k с `--resume`

## Мелкие задачи
- [ ] iptables для блокировки интернета (если не активны после ребута)
- [ ] Проверить CAPTCHA-логи: `grep "CAPTCHA" logs/train_run.log | wc -l`
